<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mirror Terminal Lite</title>
  <style>
    body {
      background: #001f1f;
      color: #00ffcc;
      font-family: monospace;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }
    #terminal {
      flex: 1;
      overflow-y: auto;
      padding: 10px;
    }
    #commandInput {
      border: none;
      padding: 12px;
      font-size: 18px;
      width: 100%;
      box-sizing: border-box;
      background: #002b2b;
      color: #00ffcc;
      outline: none;
    }
    .cmd-line {
      margin-bottom: 4px;
      white-space: pre-wrap;
    }
    .cmd-user {
      color: #ffaa00;
    }
  </style>
</head>
<body>

  <div id="terminal"></div>
  <input id="commandInput" type="text" placeholder="Enter command and press Enter..." autocomplete="off" autofocus />

  <script>
    const terminal = document.getElementById("terminal");
    const input = document.getElementById("commandInput");

    const baseLines = [
      "ğŸª Mirror Terminal Initialized...",
      "[R] Root system",
      "[A] Access protocol",
      "[F] Framework loaded",
      "[A] Activation confirmed",
      "[T] Transfer online",
      "[Y] Yielding identity...",
      "[A] Authorization granted",
      "[O] Operating core",
      "[S] System secured",
      ">> Awaiting commands..."
    ];

    let i = 0;
    function showBaseLines() {
      if (i < baseLines.length) {
        const div = document.createElement("div");
        div.className = "cmd-line";
        div.textContent = baseLines[i];
        terminal.appendChild(div);
        terminal.scrollTop = terminal.scrollHeight;
        i++;
        setTimeout(showBaseLines, 200);
      }
    }

    // ğŸ§  Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ø±Ù…Ø²ÙŠØ©
    const symbolicMemory = JSON.parse(localStorage.getItem("symbolicMemory") || "{}");

    // Ø£ÙˆØ§Ù…Ø± Ø®Ø§ØµØ© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªÙ†ÙÙŠØ°
    const commandActions = {
      "hello": () => appendLine("ğŸ‘‹ Hello there!"),
      "clear": () => terminal.innerHTML = "",
    };

    // Ø±Ø¯ÙˆØ¯ Ø¹Ù„Ù‰ Ø£Ø³Ø¦Ù„Ø© Ù…Ø¹ÙŠÙ†Ø©
    const questionResponses = {
      "how are you": ["I'm just code, but thanks!", "Running smoothly."],
      "who are you": ["I am Mirror Terminal.", "A reflection of your input."]
    };

    // Ù‚ÙˆØ§Ø¹Ø¯ Ù„ØºÙˆÙŠØ©
    const grammarMapping = {
      "you": "2nd person pronoun",
      "are": "verb to be",
      "i": "1st person pronoun"
    };

    // Ù…Ø´Ø§Ø¹Ø± Ù…Ù…Ø«Ù„Ø© Ø¨Ø¥ÙŠÙ…ÙˆØ¬ÙŠ
    const emojiResponseMap = {
      "ğŸ™‚": { feeling: "happy", opposite: "ğŸ˜" },
      "ğŸ˜¡": { feeling: "angry", opposite: "ğŸ˜Œ" },
    };

    // Ø±Ù…ÙˆØ² Ø±ÙŠØ§Ø¶ÙŠØ©
    const mathMapping = {
      "+": "addition",
      "-": "subtraction",
      "*": "multiplication",
      "/": "division"
    };

    // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø¥Ù„Ù‰ Ø­Ø±ÙˆÙ
    const numToLetter = {
      "1": "A", "2": "B", "3": "C", "4": "D",
      "5": "E", "6": "F", "7": "G", "8": "H",
      "9": "I", "0": "O"
    };

    // Ø£ÙˆØ§Ù…Ø± Ù…Ø«Ø§Ù„ Ù„ÙƒÙ„ Ø­Ø±Ù
    const exampleCommands = {
      "A": ["Access", "Awaken"],
      "B": ["Build", "Break"],
      "C": ["Connect", "Clone"]
    };

    // ØªØ¹Ù„ÙŠÙ… Ø£ÙˆØ§Ù…Ø± Ø¬Ø¯ÙŠØ¯Ø©
    function handleLearningCommand(input) {
      if (input.startsWith("learn ")) {
        const parts = input.split(" ");
        if (parts.length < 3) return "Usage: learn <command> <response>";
        const cmd = parts[1];
        const response = parts.slice(2).join(" ");
        symbolicMemory[cmd] = response;
        localStorage.setItem("symbolicMemory", JSON.stringify(symbolicMemory));
        return `ğŸ“š Learned "${cmd}" â†’ "${response}"`;
      }
      return null;
    }

    // ØªÙØ³ÙŠØ± Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
    function interpretInput(input) {
      const lowerInput = input.trim().toLowerCase();

      // 1. ØªØ¹Ù„Ù…
      const learnResult = handleLearningCommand(lowerInput);
      if (learnResult) return learnResult;

      // 2. Ø°Ø§ÙƒØ±Ø© Ù…ØªØ¹Ù„Ù…Ø©
      if (symbolicMemory[lowerInput]) return symbolicMemory[lowerInput];

      // 3. Ø£ÙˆØ§Ù…Ø± Ù…Ø­Ø¯Ø¯Ø©
      if (commandActions[lowerInput]) {
        commandActions[lowerInput]();
        return `ğŸ”§ Command "${lowerInput}" executed.`;
      }

      // 4. Ø±Ø¯ÙˆØ¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
      if (questionResponses[lowerInput]) {
        const answers = questionResponses[lowerInput];
        return `Answer 1: ${answers[0]}\nAnswer 2: ${answers[1]}`;
      }

      // 5. recall
      if (lowerInput === "recall") {
        let res = "ğŸ§  Learned commands:\n";
        for (let key in symbolicMemory) {
          res += `${key} â†’ ${symbolicMemory[key]}\n`;
        }
        return res.trim();
      }

      // 6. ØªØ­Ù„ÙŠÙ„ Ù„ØºÙˆÙŠ Ø£Ùˆ Ù…Ø´Ø§Ø¹Ø±ÙŠ Ø£Ùˆ Ø±ÙŠØ§Ø¶ÙŠ
      const result = [];

      const words = lowerInput.split(/\s+/);
      words.forEach(word => {
        const mapped = grammarMapping[word] || mathMapping[word] || emojiResponseMap[word];
        if (mapped) {
          if (emojiResponseMap[word]) {
            result.push(`${word} â†’ Feeling: ${mapped.feeling}, Opposite: ${mapped.opposite}`);
          } else {
            result.push(`${word} â†’ ${mapped}`);
          }
        }
      });

      // 7. ØªØ­Ù„ÙŠÙ„ Ø­Ø±ÙˆÙ ÙˆØ£Ø±Ù‚Ø§Ù…
      const chars = lowerInput.toUpperCase().replace(/[^A-Z0-9]/g, '').split('');
      chars.forEach((char, i) => {
        let letter = char;
        if (numToLetter[char]) letter = numToLetter[char];
        if (exampleCommands[letter]) {
          const cmd = exampleCommands[letter][i % exampleCommands[letter].length];
          result.push(`${letter} â†’ ${cmd}`);
        } else {
          result.push(`[${char}]`);
        }
      });

      if (result.length) return result.join(" | ");

      return `âš ï¸ Unknown command: "${input}"`;
    }

    // Ø¹Ø±Ø¶ Ø³Ø·Ø± Ø¬Ø¯ÙŠØ¯
    function appendLine(text, className = "cmd-line") {
      const div = document.createElement("div");
      div.className = className;
      div.textContent = text;
      terminal.appendChild(div);
      terminal.scrollTop = terminal.scrollHeight;
    }

    // Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    input.addEventListener("keydown", function (e) {
      if (e.key === "Enter") {
        const cmd = input.value.trim();
        if (!cmd) return;

        appendLine("> " + cmd, "cmd-line cmd-user");
        const response = interpretInput(cmd);
        appendLine(response);
        input.value = "";
      }
    });

    // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªÙ…Ù‡ÙŠØ¯ÙŠØ©
    showBaseLines();
  </script>

</body>
</html>